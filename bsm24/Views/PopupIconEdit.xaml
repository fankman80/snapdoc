<?xml version="1.0" encoding="utf-8" ?>
<Mopups:PopupPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:Mopups="clr-namespace:Mopups.Pages;assembly=Mopups"
             xmlns:Animations="clr-namespace:Mopups.Animations;assembly=Mopups"
             xmlns:uranium="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
             xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             xmlns:m="clr-namespace:UraniumUI.Icons.MaterialSymbols;assembly=UraniumUI.Icons.MaterialSymbols"   
             xmlns:local="clr-namespace:bsm24.Views"
             x:Class="bsm24.Views.PopupIconEdit"
             BackgroundClicked="PopupPage_BackgroundClicked"
             BackgroundInputTransparent="False"
             CloseWhenBackgroundIsClicked="True"
             HasSystemPadding="False"
             BackgroundColor="#60000000"
             Title="Icon Editor">

    <Border
        StrokeShape="RoundRectangle 20,20,20,20"
        Padding="16,16,16,16"
        BackgroundColor="{AppThemeBinding Light={DynamicResource PrimaryBackground}, Dark={DynamicResource PrimaryBackgroundDark}}"
        WidthRequest="300"
        HorizontalOptions="Center"
        VerticalOptions="Center">

        <VerticalStackLayout x:DataType="local:PopupIconEdit">
            <Label Text="Icon Editor" FontAttributes="Bold"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Image Grid.Column="0" Grid.Row="0" Grid.RowSpan="2"
                       x:Name="iconImage" Margin="10"/>

                <material:TextField Grid.Column="2" Grid.Row="0" 
                                    x:Name="anchorX"
                                    Title="Ankerpunkt X"
                                    TextColor="{AppThemeBinding Light={DynamicResource PrimaryText}, Dark={DynamicResource PrimaryDarkText}}"
                                    BorderColor="{AppThemeBinding Light={DynamicResource SecondaryBackground}, Dark={DynamicResource SecondaryBackground}}"
                                    AccentColor="{AppThemeBinding Light={DynamicResource PrimaryAccent}, Dark={DynamicResource SecondaryDark}}"/>
               
                <material:TextField Grid.Column="2" Grid.Row="1" 
                                    x:Name="anchorY"
                                    Title="Ankerpunkt Y"
                                    TextColor="{AppThemeBinding Light={DynamicResource PrimaryText}, Dark={DynamicResource PrimaryDarkText}}"
                                    BorderColor="{AppThemeBinding Light={DynamicResource SecondaryBackground}, Dark={DynamicResource SecondaryBackground}}"
                                    AccentColor="{AppThemeBinding Light={DynamicResource PrimaryAccent}, Dark={DynamicResource SecondaryDark}}"/>                
            </Grid>

            <material:TextField x:Name="iconName"
                                Title="Bezeichnung"
                                TextColor="{AppThemeBinding Light={DynamicResource PrimaryText}, Dark={DynamicResource PrimaryDarkText}}"
                                BorderColor="{AppThemeBinding Light={DynamicResource SecondaryBackground}, Dark={DynamicResource SecondaryBackground}}"
                                AccentColor="{AppThemeBinding Light={DynamicResource PrimaryAccent}, Dark={DynamicResource SecondaryDark}}"
                                AllowClear="True"/>

            <Label x:Name="sliderText" Text="Voreinstellung Skalierung:" Margin="0, 0, 0, -12"/>
            <Slider x:Name="iconScale"
                    Maximum="100"
                    Minimum="1"
                    Value="100"
                    ThumbColor="{DynamicResource Primary}"
                    MinimumTrackColor="{DynamicResource Primary}"
                    MaximumTrackColor="{DynamicResource PrimaryDark}"
                    ValueChanged="OnSliderValueChanged"/>

            <HorizontalStackLayout>
                <Label Text="Voreinstellung Rotation sperren:" VerticalOptions="Start"/>
                <Switch Grid.Column="1" Grid.Row="0"
                        x:Name="allowRotate"
                        Margin="0,-8,0,0"
                        ThumbColor="{AppThemeBinding Light={DynamicResource Primary}, Dark={DynamicResource PrimaryDarkAccent}}"
                        OnColor="{DynamicResource Secondary}"/>
            </HorizontalStackLayout>
           
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Text="Pin Farbe wÃ¤hlen:" VerticalTextAlignment="Center" HeightRequest="30"/>   
                <BoxView Grid.Column="1" Color="{Binding SelectedColor}" />                
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />                    
                </Grid.RowDefinitions>                
                
                <!-- Slider for Red -->
                <Slider Grid.Column="1" Grid.Row="0"
                        Margin="0,6,0,0"
                        Minimum="0" Maximum="255" Value="{Binding RedValue}"
                        ThumbColor="{DynamicResource Primary}"
                        MinimumTrackColor="{DynamicResource Primary}"
                        MaximumTrackColor="{DynamicResource PrimaryDark}"/>
                <Entry Grid.Column="0" Grid.Row="0"
                       HorizontalTextAlignment="Center"
                       Text="{Binding RedValue, Mode=TwoWay}" Keyboard="Numeric" TextColor="Red" />

                <!-- Slider for Green -->
                <Slider Grid.Column="1" Grid.Row="1"
                        Margin="0,6,0,0"                        
                        Minimum="0" Maximum="255" Value="{Binding GreenValue}"
                        ThumbColor="{DynamicResource Primary}"
                        MinimumTrackColor="{DynamicResource Primary}"
                        MaximumTrackColor="{DynamicResource PrimaryDark}"/>
                <Entry Grid.Column="0" Grid.Row="1"
                       HorizontalTextAlignment="Center"                       
                       Text="{Binding GreenValue, Mode=TwoWay}" Keyboard="Numeric" TextColor="Green" />

                <!-- Slider for Blue -->
                <Slider Grid.Column="1" Grid.Row="2"
                        Margin="0,6,0,0"                        
                        Minimum="0" Maximum="255" Value="{Binding BlueValue}"
                        ThumbColor="{DynamicResource Primary}"
                        MinimumTrackColor="{DynamicResource Primary}"
                        MaximumTrackColor="{DynamicResource PrimaryDark}"/>
                <Entry Grid.Column="0" Grid.Row="2"
                       HorizontalTextAlignment="Center"                       
                       Text="{Binding BlueValue, Mode=TwoWay}" Keyboard="Numeric" TextColor="Blue" />
            </Grid>
           
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Button Grid.Column="0"
                        x:Name="cancelButtonText"
                        Text="Abbrechen"
                        BackgroundColor="{AppThemeBinding Light={DynamicResource Primary}, Dark={DynamicResource PrimaryDark}}"
                        TextColor="{AppThemeBinding Light={DynamicResource PrimaryDarkText}, Dark={DynamicResource PrimaryText}}"                       
                        Clicked="OnCancelClicked" />
                <Button Grid.Column="1"
                        x:Name="okButtonText"
                        Text="Ok"
                        BackgroundColor="{AppThemeBinding Light={DynamicResource Primary}, Dark={DynamicResource PrimaryDark}}"
                        TextColor="{AppThemeBinding Light={DynamicResource PrimaryDarkText}, Dark={DynamicResource PrimaryText}}"                     
                        Clicked="OnOkClicked" />
            </Grid>
        </VerticalStackLayout>
    </Border>

</Mopups:PopupPage>
